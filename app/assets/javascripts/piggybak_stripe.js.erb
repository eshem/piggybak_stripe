//piggybak stripe
<% stripe_method = Piggybak::PaymentMethod.find_by_klass("::PiggybakStripe::PaymentCalculator::Stripe") %>
<% stripe_calculator = ::PiggybakStripe::PaymentCalculator::Stripe.new(stripe_method)%>
  Stripe.setPublishableKey('<%= stripe_calculator.publishable_key %>');

  $('#submit').submit(function(e){
    event.preventDefault();
  });

  // function stripeResponseHandler(status, response) {
  //   alert('calling fnction');
  //     if (response.error) {
  //         // re-enable the submit button
  //         $('#submit').removeAttr("disabled");
  //         // show the errors on the form
  //         $("#stripe_error").html(response.error.message);
  //         $('#order_line_items_attributes_1_payment_attributes_stripe_token').val(response.id);

  //     } else {
  //         // insert the token into the form so it gets submitted to the server
  //         $('#order_line_items_attributes_1_payment_attributes_stripe_token').val(response.id);
  //         // and submit
  //         // console.log(token);
  //         // form.get(0).submit();
  //     }
  // }

  //     $('#new_piggybak_order').submit(function(e) {
  //       alert('hi');
  //       event.preventDefault();
  //       Stripe.card.createToken({
  //         number: $('#order_line_items_attributes_1_payment_attributes_number').val(),
  //         cvc: $('#order_line_items_attributes_1_payment_attributes_verification_value').val(),
  //         exp_month: $('#order_line_items_attributes_1_payment_attributes_month').val(),
  //         exp_year: $('#order_line_items_attributes_1_payment_attributes_year').val()
  //       }, stripeResponseHandler);
  //     });